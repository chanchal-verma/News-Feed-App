package com.chanchal.sindhubhawanshaadi.newsfeed;

import android.app.Activity;
import android.content.Context;
import android.text.TextUtils;
import android.util.Log;
import android.view.View;
import android.view.inputmethod.InputMethodManager;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.net.HttpURLConnection;
import java.net.MalformedURLException;
import java.net.URL;
import java.nio.charset.Charset;
import java.util.ArrayList;
import static com.chanchal.sindhubhawanshaadi.newsfeed.MainActivity.LOG_TAG;

public class QueryUtils {

//    private static final String News_Api ="{\"response\":{\"status\":\"ok\",\"userTier\":\"developer\",\"total\":3311,\"startIndex\":1,\"pageSize\":50,\"currentPage\":1,\"pages\":67,\"orderBy\":\"relevance\",\"results\":[{\"id\":\"politics/2020/jul/26/lindsay-hoyle-commons-may-never-return-to-packed-chamber-debates-says-speaker-coronavirus\",\"type\":\"article\",\"sectionId\":\"politics\",\"sectionName\":\"Politics\",\"webPublicationDate\":\"2020-07-26T21:00:34Z\",\"webTitle\":\"Commons may never return to packed chamber debates, says Speaker\",\"webUrl\":\"https://www.theguardian.com/politics/2020/jul/26/lindsay-hoyle-commons-may-never-return-to-packed-chamber-debates-says-speaker-coronavirus\",\"apiUrl\":\"https://content.guardianapis.com/politics/2020/jul/26/lindsay-hoyle-commons-may-never-return-to-packed-chamber-debates-says-speaker-coronavirus\",\"isHosted\":false,\"pillarId\":\"pillar/news\",\"pillarName\":\"News\"},{\"id\":\"world/2020/may/04/slow-moving-commons-debates-the-key-issues-of-march\",\"type\":\"article\",\"sectionId\":\"world\",\"sectionName\":\"World news\",\"webPublicationDate\":\"2020-05-04T19:54:07Z\",\"webTitle\":\"Slow-moving Commons debates the key issues of March\",\"webUrl\":\"https://www.theguardian.com/world/2020/may/04/slow-moving-commons-debates-the-key-issues-of-march\",\"apiUrl\":\"https://content.guardianapis.com/world/2020/may/04/slow-moving-commons-debates-the-key-issues-of-march\",\"isHosted\":false,\"pillarId\":\"pillar/news\",\"pillarName\":\"News\"},{\"id\":\"commentisfree/2020/feb/27/tv-debates-brexit-bbc-centre-ground-leavers-remainers\",\"type\":\"article\",\"sectionId\":\"commentisfree\",\"sectionName\":\"Opinion\",\"webPublicationDate\":\"2020-02-27T09:09:43Z\",\"webTitle\":\"I organised TV debates on Brexit. The \u2018reasonable centre ground\u2019 silenced itself | Anonymous\",\"webUrl\":\"https://www.theguardian.com/commentisfree/2020/feb/27/tv-debates-brexit-bbc-centre-ground-leavers-remainers\",\"apiUrl\":\"https://content.guardianapis.com/commentisfree/2020/feb/27/tv-debates-brexit-bbc-centre-ground-leavers-remainers\",\"isHosted\":false,\"pillarId\":\"pillar/opinion\",\"pillarName\":\"Opinion\"},{\"id\":\"environment/2020/aug/20/time-for-real-debate-on-river-regulation\",\"type\":\"article\",\"sectionId\":\"environment\",\"sectionName\":\"Environment\",\"webPublicationDate\":\"2020-08-20T17:35:28Z\",\"webTitle\":\"Time for real debate on river regulation\",\"webUrl\":\"https://www.theguardian.com/environment/2020/aug/20/time-for-real-debate-on-river-regulation\",\"apiUrl\":\"https://content.guardianapis.com/environment/2020/aug/20/time-for-real-debate-on-river-regulation\",\"isHosted\":false,\"pillarId\":\"pillar/news\",\"pillarName\":\"News\"},{\"id\":\"politics/2019/nov/26/brexit-weekly-briefing-heated-debates-and-pledges-to-splash-cash\",\"type\":\"article\",\"sectionId\":\"politics\",\"sectionName\":\"Politics\",\"webPublicationDate\":\"2019-11-26T07:00:15Z\",\"webTitle\":\"Brexit weekly briefing: heated debates and pledges to splash cash\",\"webUrl\":\"https://www.theguardian.com/politics/2019/nov/26/brexit-weekly-briefing-heated-debates-and-pledges-to-splash-cash\",\"apiUrl\":\"https://content.guardianapis.com/politics/2019/nov/26/brexit-weekly-briefing-heated-debates-and-pledges-to-splash-cash\",\"isHosted\":false,\"pillarId\":\"pillar/news\",\"pillarName\":\"News\"},{\"id\":\"politics/2019/nov/04/tv-election-debates-must-include-the-lib-dems-leader\",\"type\":\"article\",\"sectionId\":\"politics\",\"sectionName\":\"Politics\",\"webPublicationDate\":\"2019-11-04T17:52:51Z\",\"webTitle\":\"TV election debates must include the Lib Dems\u2019 leader | Letters\",\"webUrl\":\"https://www.theguardian.com/politics/2019/nov/04/tv-election-debates-must-include-the-lib-dems-leader\",\"apiUrl\":\"https://content.guardianapis.com/politics/2019/nov/04/tv-election-debates-must-include-the-lib-dems-leader\",\"isHosted\":false,\"pillarId\":\"pillar/news\",\"pillarName\":\"News\"},{\"id\":\"politics/live/2019/oct/30/lords-to-debate-boris-johnsons-early-election-bill-after-brexit-deadlock-live\",\"type\":\"liveblog\",\"sectionId\":\"politics\",\"sectionName\":\"Politics\",\"webPublicationDate\":\"2019-10-30T18:04:01Z\",\"webTitle\":\"General election: Corbyn challenges Johnson to TV debates - as it happened\",\"webUrl\":\"https://www.theguardian.com/politics/live/2019/oct/30/lords-to-debate-boris-johnsons-early-election-bill-after-brexit-deadlock-live\",\"apiUrl\":\"https://content.guardianapis.com/politics/live/2019/oct/30/lords-to-debate-boris-johnsons-early-election-bill-after-brexit-deadlock-live\",\"isHosted\":false,\"pillarId\":\"pillar/news\",\"pillarName\":\"News\"},{\"id\":\"media/2020/may/29/bbc-set-to-cut-regional-news-despite-high-audience-figures\",\"type\":\"article\",\"sectionId\":\"media\",\"sectionName\":\"Media\",\"webPublicationDate\":\"2020-05-29T14:10:14Z\",\"webTitle\":\"BBC local news programming in balance due to budget cuts\",\"webUrl\":\"https://www.theguardian.com/media/2020/may/29/bbc-set-to-cut-regional-news-despite-high-audience-figures\",\"apiUrl\":\"https://content.guardianapis.com/media/2020/may/29/bbc-set-to-cut-regional-news-despite-high-audience-figures\",\"isHosted\":false,\"pillarId\":\"pillar/news\",\"pillarName\":\"News\"},{\"id\":\"politics/2019/oct/30/liberal-democrats-face-being-frozen-out-of-live-tv-debates-general-election\",\"type\":\"article\",\"sectionId\":\"politics\",\"sectionName\":\"Politics\",\"webPublicationDate\":\"2019-10-30T19:00:46Z\",\"webTitle\":\"Lib Dems face being frozen out of any live TV debates\",\"webUrl\":\"https://www.theguardian.com/politics/2019/oct/30/liberal-democrats-face-being-frozen-out-of-live-tv-debates-general-election\",\"apiUrl\":\"https://content.guardianapis.com/politics/2019/oct/30/liberal-democrats-face-being-frozen-out-of-live-tv-debates-general-election\",\"isHosted\":false,\"pillarId\":\"pillar/news\",\"pillarName\":\"News\"},{\"id\":\"politics/2020/sep/14/keir-starmer-to-miss-crucial-brexit-debate-due-to-self-isolation-coronavirus\",\"type\":\"article\",\"sectionId\":\"politics\",\"sectionName\":\"Politics\",\"webPublicationDate\":\"2020-09-14T12:04:26Z\",\"webTitle\":\"Keir Starmer to miss crucial Brexit debate due to self-isolation\",\"webUrl\":\"https://www.theguardian.com/politics/2020/sep/14/keir-starmer-to-miss-crucial-brexit-debate-due-to-self-isolation-coronavirus\",\"apiUrl\":\"https://content.guardianapis.com/politics/2020/sep/14/keir-starmer-to-miss-crucial-brexit-debate-due-to-self-isolation-coronavirus\",\"isHosted\":false,\"pillarId\":\"pillar/news\",\"pillarName\":\"News\"},{\"id\":\"politics/2020/oct/08/belgian-ambassador-throws-king-charles-ii-treaty-into-eu-fishing-debate\",\"type\":\"article\",\"sectionId\":\"politics\",\"sectionName\":\"Politics\",\"webPublicationDate\":\"2020-10-08T16:53:01Z\",\"webTitle\":\"Belgian ambassador throws King Charles II treaty into EU fishing debate\",\"webUrl\":\"https://www.theguardian.com/politics/2020/oct/08/belgian-ambassador-throws-king-charles-ii-treaty-into-eu-fishing-debate\",\"apiUrl\":\"https://content.guardianapis.com/politics/2020/oct/08/belgian-ambassador-throws-king-charles-ii-treaty-into-eu-fishing-debate\",\"isHosted\":false,\"pillarId\":\"pillar/news\",\"pillarName\":\"News\"},{\"id\":\"commentisfree/2020/sep/30/trump-biden-debate-britain-special-relationship\",\"type\":\"article\",\"sectionId\":\"commentisfree\",\"sectionName\":\"Opinion\",\"webPublicationDate\":\"2020-09-30T17:02:42Z\",\"webTitle\":\"The Trump-Biden debate revealed the dangers of Britain's 'special relationship' | Martin Kettle\",\"webUrl\":\"https://www.theguardian.com/commentisfree/2020/sep/30/trump-biden-debate-britain-special-relationship\",\"apiUrl\":\"https://content.guardianapis.com/commentisfree/2020/sep/30/trump-biden-debate-britain-special-relationship\",\"isHosted\":false,\"pillarId\":\"pillar/opinion\",\"pillarName\":\"Opinion\"},{\"id\":\"commentisfree/2020/sep/27/where-is-the-voice-of-the-left-as-libertarians-annex-the-covid-19-debate\",\"type\":\"article\",\"sectionId\":\"commentisfree\",\"sectionName\":\"Opinion\",\"webPublicationDate\":\"2020-09-27T07:15:38Z\",\"webTitle\":\"Where is the voice of the left as 'libertarians' annex the Covid-19 debate? | Kenan Malik\",\"webUrl\":\"https://www.theguardian.com/commentisfree/2020/sep/27/where-is-the-voice-of-the-left-as-libertarians-annex-the-covid-19-debate\",\"apiUrl\":\"https://content.guardianapis.com/commentisfree/2020/sep/27/where-is-the-voice-of-the-left-as-libertarians-annex-the-covid-19-debate\",\"isHosted\":false,\"pillarId\":\"pillar/opinion\",\"pillarName\":\"Opinion\"},{\"id\":\"politics/live/2019/nov/16/general-election-labour-meet-decide-manifesto-clause-v-live-news\",\"type\":\"liveblog\",\"sectionId\":\"politics\",\"sectionName\":\"Politics\",\"webPublicationDate\":\"2019-11-16T18:02:26Z\",\"webTitle\":\"General election: focus on freedom of movement as Labour debates manifesto \u2013 live news\",\"webUrl\":\"https://www.theguardian.com/politics/live/2019/nov/16/general-election-labour-meet-decide-manifesto-clause-v-live-news\",\"apiUrl\":\"https://content.guardianapis.com/politics/live/2019/nov/16/general-election-labour-meet-decide-manifesto-clause-v-live-news\",\"isHosted\":false,\"pillarId\":\"pillar/news\",\"pillarName\":\"News\"},{\"id\":\"politics/2020/aug/28/barnier-flabbergasted-uk-attempt-reopen-brexit-specialty-food-drink-debate\",\"type\":\"article\",\"sectionId\":\"politics\",\"sectionName\":\"Politics\",\"webPublicationDate\":\"2020-08-28T13:58:33Z\",\"webTitle\":\"Barnier 'flabbergasted' at UK attempt to reopen Brexit specialty food debate\",\"webUrl\":\"https://www.theguardian.com/politics/2020/aug/28/barnier-flabbergasted-uk-attempt-reopen-brexit-specialty-food-drink-debate\",\"apiUrl\":\"https://content.guardianapis.com/politics/2020/aug/28/barnier-flabbergasted-uk-attempt-reopen-brexit-specialty-food-drink-debate\",\"isHosted\":false,\"pillarId\":\"pillar/news\",\"pillarName\":\"News\"},{\"id\":\"world/2020/sep/22/first-tv-debate-jacinda-ardern-judith-collins-avoids-being-horror-show\",\"type\":\"article\",\"sectionId\":\"world\",\"sectionName\":\"World news\",\"webPublicationDate\":\"2020-09-22T12:20:40Z\",\"webTitle\":\"First TV debate between Ardern and Collins avoids being a horror show\",\"webUrl\":\"https://www.theguardian.com/world/2020/sep/22/first-tv-debate-jacinda-ardern-judith-collins-avoids-being-horror-show\",\"apiUrl\":\"https://content.guardianapis.com/world/2020/sep/22/first-tv-debate-jacinda-ardern-judith-collins-avoids-being-horror-show\",\"isHosted\":false,\"pillarId\":\"pillar/news\",\"pillarName\":\"News\"},{\"id\":\"business/2020/sep/18/mps-to-debate-arm-holdings-40bn-sale-despite-nvidia-bosss-guarantees\",\"type\":\"article\",\"sectionId\":\"business\",\"sectionName\":\"Business\",\"webPublicationDate\":\"2020-09-18T15:05:00Z\",\"webTitle\":\"MPs to debate Arm Holdings $40bn sale despite Nvidia boss's guarantees\",\"webUrl\":\"https://www.theguardian.com/business/2020/sep/18/mps-to-debate-arm-holdings-40bn-sale-despite-nvidia-bosss-guarantees\",\"apiUrl\":\"https://content.guardianapis.com/business/2020/sep/18/mps-to-debate-arm-holdings-40bn-sale-despite-nvidia-bosss-guarantees\",\"isHosted\":false,\"pillarId\":\"pillar/news\",\"pillarName\":\"News\"},{\"id\":\"politics/2019/nov/13/girly-swot-jo-swinson-fights-for-more-than-a-ringside-seat-in-itv-debates\",\"type\":\"article\",\"sectionId\":\"politics\",\"sectionName\":\"Politics\",\"webPublicationDate\":\"2019-11-13T15:12:22Z\",\"webTitle\":\"'Girly swot' Jo Swinson fights for more than a ringside seat in ITV debates | Marina Hyde\",\"webUrl\":\"https://www.theguardian.com/politics/2019/nov/13/girly-swot-jo-swinson-fights-for-more-than-a-ringside-seat-in-itv-debates\",\"apiUrl\":\"https://content.guardianapis.com/politics/2019/nov/13/girly-swot-jo-swinson-fights-for-more-than-a-ringside-seat-in-itv-debates\",\"isHosted\":false,\"pillarId\":\"pillar/news\",\"pillarName\":\"News\"},{\"id\":\"politics/2019/nov/16/corbyn-counts-on-tv-debates-to-close-the-gap-as-tories-poll-lead-increases\",\"type\":\"article\",\"sectionId\":\"politics\",\"sectionName\":\"Politics\",\"webPublicationDate\":\"2019-11-16T19:03:51Z\",\"webTitle\":\"Corbyn counts on TV debates to close the gap as Tories\u2019 poll lead increases\",\"webUrl\":\"https://www.theguardian.com/politics/2019/nov/16/corbyn-counts-on-tv-debates-to-close-the-gap-as-tories-poll-lead-increases\",\"apiUrl\":\"https://content.guardianapis.com/politics/2019/nov/16/corbyn-counts-on-tv-debates-to-close-the-gap-as-tories-poll-lead-increases\",\"isHosted\":false,\"pillarId\":\"pillar/news\",\"pillarName\":\"News\"},{\"id\":\"commentisfree/2019/may/11/missing-ingredient-debates-generosity-labour-antisemitism\",\"type\":\"article\",\"sectionId\":\"commentisfree\",\"sectionName\":\"Opinion\",\"webPublicationDate\":\"2019-05-11T05:00:12Z\",\"webTitle\":\"The missing ingredient in today\u2019s debates? Generosity | Gary Younge\",\"webUrl\":\"https://www.theguardian.com/commentisfree/2019/may/11/missing-ingredient-debates-generosity-labour-antisemitism\",\"apiUrl\":\"https://content.guardianapis.com/commentisfree/2019/may/11/missing-ingredient-debates-generosity-labour-antisemitism\",\"isHosted\":false,\"pillarId\":\"pillar/opinion\",\"pillarName\":\"Opinion\"},{\"id\":\"politics/2020/jun/11/bame-mps-accuse-priti-patel-of-gaslighting-in-racism-debate\",\"type\":\"article\",\"sectionId\":\"politics\",\"sectionName\":\"Politics\",\"webPublicationDate\":\"2020-06-11T18:15:16Z\",\"webTitle\":\"BAME MPs accuse Priti Patel of gaslighting in racism debate\",\"webUrl\":\"https://www.theguardian.com/politics/2020/jun/11/bame-mps-accuse-priti-patel-of-gaslighting-in-racism-debate\",\"apiUrl\":\"https://content.guardianapis.com/politics/2020/jun/11/bame-mps-accuse-priti-patel-of-gaslighting-in-racism-debate\",\"isHosted\":false,\"pillarId\":\"pillar/news\",\"pillarName\":\"News\"},{\"id\":\"politics/2020/jun/23/rees-mogg-loses-vote-to-let-mps-debate-bullying-claims\",\"type\":\"article\",\"sectionId\":\"politics\",\"sectionName\":\"Politics\",\"webPublicationDate\":\"2020-06-23T20:58:08Z\",\"webTitle\":\"Rees-Mogg loses vote to let MPs debate bullying claims\",\"webUrl\":\"https://www.theguardian.com/politics/2020/jun/23/rees-mogg-loses-vote-to-let-mps-debate-bullying-claims\",\"apiUrl\":\"https://content.guardianapis.com/politics/2020/jun/23/rees-mogg-loses-vote-to-let-mps-debate-bullying-claims\",\"isHosted\":false,\"pillarId\":\"pillar/news\",\"pillarName\":\"News\"},{\"id\":\"uk-news/2020/jul/16/shamima-begum-ruling-reignites-debate-over-britons-who-joined-isis\",\"type\":\"article\",\"sectionId\":\"uk-news\",\"sectionName\":\"UK news\",\"webPublicationDate\":\"2020-07-16T14:39:27Z\",\"webTitle\":\"Shamima Begum ruling reignites debate over Britons who joined Isis\",\"webUrl\":\"https://www.theguardian.com/uk-news/2020/jul/16/shamima-begum-ruling-reignites-debate-over-britons-who-joined-isis\",\"apiUrl\":\"https://content.guardianapis.com/uk-news/2020/jul/16/shamima-begum-ruling-reignites-debate-over-britons-who-joined-isis\",\"isHosted\":false,\"pillarId\":\"pillar/news\",\"pillarName\":\"News\"},{\"id\":\"world/2020/jul/15/michael-gove-liz-truss-face-masks-debate-pret-a-manger-\",\"type\":\"article\",\"sectionId\":\"world\",\"sectionName\":\"World news\",\"webPublicationDate\":\"2020-07-15T15:35:13Z\",\"webTitle\":\"\u2018MPs should be role models\u2019: Gove and Truss face-off stirs mask debate\",\"webUrl\":\"https://www.theguardian.com/world/2020/jul/15/michael-gove-liz-truss-face-masks-debate-pret-a-manger-\",\"apiUrl\":\"https://content.guardianapis.com/world/2020/jul/15/michael-gove-liz-truss-face-masks-debate-pret-a-manger-\",\"isHosted\":false,\"pillarId\":\"pillar/news\",\"pillarName\":\"News\"},{\"id\":\"politics/2019/jun/21/jeremy-hunt-calls-for-live-tv-debates-before-tory-voting-begins\",\"type\":\"article\",\"sectionId\":\"politics\",\"sectionName\":\"Politics\",\"webPublicationDate\":\"2019-06-21T21:30:54Z\",\"webTitle\":\"Jeremy Hunt calls for live TV debates before Tory voting begins\",\"webUrl\":\"https://www.theguardian.com/politics/2019/jun/21/jeremy-hunt-calls-for-live-tv-debates-before-tory-voting-begins\",\"apiUrl\":\"https://content.guardianapis.com/politics/2019/jun/21/jeremy-hunt-calls-for-live-tv-debates-before-tory-voting-begins\",\"isHosted\":false,\"pillarId\":\"pillar/news\",\"pillarName\":\"News\"},{\"id\":\"commentisfree/2020/may/18/sage-advice-britain-coronavirus-science-government-policy\",\"type\":\"article\",\"sectionId\":\"commentisfree\",\"sectionName\":\"Opinion\",\"webPublicationDate\":\"2020-05-18T16:26:47Z\",\"webTitle\":\"The Sage advice must be published now to find where Britain got coronavirus wrong | Anthony Costello\",\"webUrl\":\"https://www.theguardian.com/commentisfree/2020/may/18/sage-advice-britain-coronavirus-science-government-policy\",\"apiUrl\":\"https://content.guardianapis.com/commentisfree/2020/may/18/sage-advice-britain-coronavirus-science-government-policy\",\"isHosted\":false,\"pillarId\":\"pillar/opinion\",\"pillarName\":\"Opinion\"},{\"id\":\"politics/2019/dec/01/sturgeon-in-control-to-better-opponents-in-itv-debate\",\"type\":\"article\",\"sectionId\":\"politics\",\"sectionName\":\"Politics\",\"webPublicationDate\":\"2019-12-01T22:13:09Z\",\"webTitle\":\"ITV election debate: the winners and the losers\",\"webUrl\":\"https://www.theguardian.com/politics/2019/dec/01/sturgeon-in-control-to-better-opponents-in-itv-debate\",\"apiUrl\":\"https://content.guardianapis.com/politics/2019/dec/01/sturgeon-in-control-to-better-opponents-in-itv-debate\",\"isHosted\":false,\"pillarId\":\"pillar/news\",\"pillarName\":\"News\"},{\"id\":\"politics/2020/feb/27/nandy-and-starmer-clash-over-brexit-and-antisemitism-in-tv-debate\",\"type\":\"article\",\"sectionId\":\"politics\",\"sectionName\":\"Politics\",\"webPublicationDate\":\"2020-02-27T23:29:33Z\",\"webTitle\":\"Nandy and Starmer clash over Brexit and antisemitism in TV debate\",\"webUrl\":\"https://www.theguardian.com/politics/2020/feb/27/nandy-and-starmer-clash-over-brexit-and-antisemitism-in-tv-debate\",\"apiUrl\":\"https://content.guardianapis.com/politics/2020/feb/27/nandy-and-starmer-clash-over-brexit-and-antisemitism-in-tv-debate\",\"isHosted\":false,\"pillarId\":\"pillar/news\",\"pillarName\":\"News\"},{\"id\":\"politics/2020/jun/25/starmers-sacking-of-long-bailey-has-reignited-labours-civil-war\",\"type\":\"article\",\"sectionId\":\"politics\",\"sectionName\":\"Politics\",\"webPublicationDate\":\"2020-06-25T20:45:38Z\",\"webTitle\":\"Starmer's removal of Long-Bailey has rekindled Labour\u2019s civil war\",\"webUrl\":\"https://www.theguardian.com/politics/2020/jun/25/starmers-sacking-of-long-bailey-has-reignited-labours-civil-war\",\"apiUrl\":\"https://content.guardianapis.com/politics/2020/jun/25/starmers-sacking-of-long-bailey-has-reignited-labours-civil-war\",\"isHosted\":false,\"pillarId\":\"pillar/news\",\"pillarName\":\"News\"},{\"id\":\"politics/2019/nov/19/vote-by-proxy-not-post-if-you-want-it-to-count\",\"type\":\"article\",\"sectionId\":\"politics\",\"sectionName\":\"Politics\",\"webPublicationDate\":\"2019-11-19T17:54:58Z\",\"webTitle\":\"Vote by proxy, not post, if you want it to count | Brief letters\",\"webUrl\":\"https://www.theguardian.com/politics/2019/nov/19/vote-by-proxy-not-post-if-you-want-it-to-count\",\"apiUrl\":\"https://content.guardianapis.com/politics/2019/nov/19/vote-by-proxy-not-post-if-you-want-it-to-count\",\"isHosted\":false,\"pillarId\":\"pillar/news\",\"pillarName\":\"News\"},{\"id\":\"politics/2019/nov/28/who-won-the-general-election-climate-debate\",\"type\":\"article\",\"sectionId\":\"politics\",\"sectionName\":\"Politics\",\"webPublicationDate\":\"2019-11-28T21:59:17Z\",\"webTitle\":\"Who won the general election climate debate?\",\"webUrl\":\"https://www.theguardian.com/politics/2019/nov/28/who-won-the-general-election-climate-debate\",\"apiUrl\":\"https://content.guardianapis.com/politics/2019/nov/28/who-won-the-general-election-climate-debate\",\"isHosted\":false,\"pillarId\":\"pillar/news\",\"pillarName\":\"News\"},{\"id\":\"commentisfree/2020/jan/21/the-guardian-view-on-the-labour-leadership-a-deep-and-wide-debate\",\"type\":\"article\",\"sectionId\":\"commentisfree\",\"sectionName\":\"Opinion\",\"webPublicationDate\":\"2020-01-21T18:29:20Z\",\"webTitle\":\"The Guardian view on the Labour leadership: a deep and wide debate | Editorial\",\"webUrl\":\"https://www.theguardian.com/commentisfree/2020/jan/21/the-guardian-view-on-the-labour-leadership-a-deep-and-wide-debate\",\"apiUrl\":\"https://content.guardianapis.com/commentisfree/2020/jan/21/the-guardian-view-on-the-labour-leadership-a-deep-and-wide-debate\",\"isHosted\":false,\"pillarId\":\"pillar/opinion\",\"pillarName\":\"Opinion\"},{\"id\":\"politics/2019/feb/01/bercow-insists-he-is-neutral-referee-in-brexit-debates\",\"type\":\"article\",\"sectionId\":\"politics\",\"sectionName\":\"Politics\",\"webPublicationDate\":\"2019-02-01T18:13:37Z\",\"webTitle\":\"Bercow insists he is neutral referee in Brexit debates\",\"webUrl\":\"https://www.theguardian.com/politics/2019/feb/01/bercow-insists-he-is-neutral-referee-in-brexit-debates\",\"apiUrl\":\"https://content.guardianapis.com/politics/2019/feb/01/bercow-insists-he-is-neutral-referee-in-brexit-debates\",\"isHosted\":false,\"pillarId\":\"pillar/news\",\"pillarName\":\"News\"},{\"id\":\"politics/2019/nov/19/general-election-leaders-debate-who-won-jeremy-corbyn-boris-johnson\",\"type\":\"article\",\"sectionId\":\"politics\",\"sectionName\":\"Politics\",\"webPublicationDate\":\"2019-11-19T21:31:29Z\",\"webTitle\":\"General election leaders' debate: who won?\",\"webUrl\":\"https://www.theguardian.com/politics/2019/nov/19/general-election-leaders-debate-who-won-jeremy-corbyn-boris-johnson\",\"apiUrl\":\"https://content.guardianapis.com/politics/2019/nov/19/general-election-leaders-debate-who-won-jeremy-corbyn-boris-johnson\",\"isHosted\":false,\"pillarId\":\"pillar/news\",\"pillarName\":\"News\"},{\"id\":\"commentisfree/2020/sep/29/the-guardian-view-on-pandemic-populism-leads-to-sloppy-lawmaking\",\"type\":\"article\",\"sectionId\":\"commentisfree\",\"sectionName\":\"Opinion\",\"webPublicationDate\":\"2020-09-29T18:37:24Z\",\"webTitle\":\"The Guardian view on pandemic populism: leads to sloppy lawmaking | Editorial\",\"webUrl\":\"https://www.theguardian.com/commentisfree/2020/sep/29/the-guardian-view-on-pandemic-populism-leads-to-sloppy-lawmaking\",\"apiUrl\":\"https://content.guardianapis.com/commentisfree/2020/sep/29/the-guardian-view-on-pandemic-populism-leads-to-sloppy-lawmaking\",\"isHosted\":false,\"pillarId\":\"pillar/opinion\",\"pillarName\":\"Opinion\"},{\"id\":\"politics/2019/dec/06/johnson-v-corbyn-who-won-the-day\",\"type\":\"article\",\"sectionId\":\"politics\",\"sectionName\":\"Politics\",\"webPublicationDate\":\"2019-12-07T10:58:40Z\",\"webTitle\":\"Johnson v Corbyn: who won the final debate?\",\"webUrl\":\"https://www.theguardian.com/politics/2019/dec/06/johnson-v-corbyn-who-won-the-day\",\"apiUrl\":\"https://content.guardianapis.com/politics/2019/dec/06/johnson-v-corbyn-who-won-the-day\",\"isHosted\":false,\"pillarId\":\"pillar/news\",\"pillarName\":\"News\"},{\"id\":\"politics/2019/sep/30/westminster-parties-sign-pledge-to-use-moderate-language\",\"type\":\"article\",\"sectionId\":\"politics\",\"sectionName\":\"Politics\",\"webPublicationDate\":\"2019-09-30T17:25:39Z\",\"webTitle\":\"Westminster parties sign pledge to use 'moderate language'\",\"webUrl\":\"https://www.theguardian.com/politics/2019/sep/30/westminster-parties-sign-pledge-to-use-moderate-language\",\"apiUrl\":\"https://content.guardianapis.com/politics/2019/sep/30/westminster-parties-sign-pledge-to-use-moderate-language\",\"isHosted\":false,\"pillarId\":\"pillar/news\",\"pillarName\":\"News\"},{\"id\":\"politics/2019/dec/06/totally-underwhelmed-readers-on-the-bbc-prime-ministerial-debate\",\"type\":\"article\",\"sectionId\":\"politics\",\"sectionName\":\"Politics\",\"webPublicationDate\":\"2019-12-06T22:10:44Z\",\"webTitle\":\"\u2018Totally underwhelmed\u2019: readers on the BBC prime ministerial debate\",\"webUrl\":\"https://www.theguardian.com/politics/2019/dec/06/totally-underwhelmed-readers-on-the-bbc-prime-ministerial-debate\",\"apiUrl\":\"https://content.guardianapis.com/politics/2019/dec/06/totally-underwhelmed-readers-on-the-bbc-prime-ministerial-debate\",\"isHosted\":false,\"pillarId\":\"pillar/news\",\"pillarName\":\"News\"},{\"id\":\"politics/2019/dec/06/how-credible-jeremy-corbyn-boris-johnson-claims-bbc-debate\",\"type\":\"article\",\"sectionId\":\"politics\",\"sectionName\":\"Politics\",\"webPublicationDate\":\"2019-12-06T21:28:14Z\",\"webTitle\":\"How credible are Corbyn and Johnson's BBC debate claims?\",\"webUrl\":\"https://www.theguardian.com/politics/2019/dec/06/how-credible-jeremy-corbyn-boris-johnson-claims-bbc-debate\",\"apiUrl\":\"https://content.guardianapis.com/politics/2019/dec/06/how-credible-jeremy-corbyn-boris-johnson-claims-bbc-debate\",\"isHosted\":false,\"pillarId\":\"pillar/news\",\"pillarName\":\"News\"},{\"id\":\"politics/2019/sep/21/the-radical-proposals-that-labour-will-debate-in-brighton\",\"type\":\"article\",\"sectionId\":\"politics\",\"sectionName\":\"Politics\",\"webPublicationDate\":\"2019-09-21T06:00:23Z\",\"webTitle\":\"The radical proposals that Labour will debate in Brighton\",\"webUrl\":\"https://www.theguardian.com/politics/2019/sep/21/the-radical-proposals-that-labour-will-debate-in-brighton\",\"apiUrl\":\"https://content.guardianapis.com/politics/2019/sep/21/the-radical-proposals-that-labour-will-debate-in-brighton\",\"isHosted\":false,\"pillarId\":\"pillar/news\",\"pillarName\":\"News\"},{\"id\":\"commentisfree/2019/nov/19/election-debate-panel-boris-johnson-jeremy-corbyn\",\"type\":\"article\",\"sectionId\":\"commentisfree\",\"sectionName\":\"Opinion\",\"webPublicationDate\":\"2019-11-19T21:58:07Z\",\"webTitle\":\"The election debate: who came out on top? | The panel\",\"webUrl\":\"https://www.theguardian.com/commentisfree/2019/nov/19/election-debate-panel-boris-johnson-jeremy-corbyn\",\"apiUrl\":\"https://content.guardianapis.com/commentisfree/2019/nov/19/election-debate-panel-boris-johnson-jeremy-corbyn\",\"isHosted\":false,\"pillarId\":\"pillar/opinion\",\"pillarName\":\"Opinion\"},{\"id\":\"politics/2019/nov/19/tories-tweet-anti-labour-posts-under-factcheckuk-brand\",\"type\":\"article\",\"sectionId\":\"politics\",\"sectionName\":\"Politics\",\"webPublicationDate\":\"2019-11-19T20:49:36Z\",\"webTitle\":\"Tories pretend to be factchecking service during leaders' debate\",\"webUrl\":\"https://www.theguardian.com/politics/2019/nov/19/tories-tweet-anti-labour-posts-under-factcheckuk-brand\",\"apiUrl\":\"https://content.guardianapis.com/politics/2019/nov/19/tories-tweet-anti-labour-posts-under-factcheckuk-brand\",\"isHosted\":false,\"pillarId\":\"pillar/news\",\"pillarName\":\"News\"},{\"id\":\"commentisfree/2019/nov/26/johnson-corbyn-sturgeon-vote-snp-leadership-scotland\",\"type\":\"article\",\"sectionId\":\"commentisfree\",\"sectionName\":\"Opinion\",\"webPublicationDate\":\"2019-11-26T07:00:15Z\",\"webTitle\":\"Johnson or Corbyn? I\u2019d rather vote Sturgeon | Suzanne Moore\",\"webUrl\":\"https://www.theguardian.com/commentisfree/2019/nov/26/johnson-corbyn-sturgeon-vote-snp-leadership-scotland\",\"apiUrl\":\"https://content.guardianapis.com/commentisfree/2019/nov/26/johnson-corbyn-sturgeon-vote-snp-leadership-scotland\",\"isHosted\":false,\"pillarId\":\"pillar/opinion\",\"pillarName\":\"Opinion\"},{\"id\":\"politics/2020/feb/05/baroness-morgan-turncotes-brings-disingenuity-bbc-debate\",\"type\":\"article\",\"sectionId\":\"politics\",\"sectionName\":\"Politics\",\"webPublicationDate\":\"2020-02-05T19:56:01Z\",\"webTitle\":\"Baroness Morgan of Turncotes brings her disingenuity to BBC debate | John Crace\",\"webUrl\":\"https://www.theguardian.com/politics/2020/feb/05/baroness-morgan-turncotes-brings-disingenuity-bbc-debate\",\"apiUrl\":\"https://content.guardianapis.com/politics/2020/feb/05/baroness-morgan-turncotes-brings-disingenuity-bbc-debate\",\"isHosted\":false,\"pillarId\":\"pillar/news\",\"pillarName\":\"News\"},{\"id\":\"politics/2019/dec/06/bbc-debate-corbyn-hits-out-at-johnsons-racist-remarks\",\"type\":\"article\",\"sectionId\":\"politics\",\"sectionName\":\"Politics\",\"webPublicationDate\":\"2019-12-06T22:11:52Z\",\"webTitle\":\"BBC debate: Corbyn hits out at Johnson's \u2018racist remarks\u2019\",\"webUrl\":\"https://www.theguardian.com/politics/2019/dec/06/bbc-debate-corbyn-hits-out-at-johnsons-racist-remarks\",\"apiUrl\":\"https://content.guardianapis.com/politics/2019/dec/06/bbc-debate-corbyn-hits-out-at-johnsons-racist-remarks\",\"isHosted\":false,\"pillarId\":\"pillar/news\",\"pillarName\":\"News\"},{\"id\":\"politics/2019/dec/05/electoral-reform-dangerously-absent-from-debate-say-campaigners\",\"type\":\"article\",\"sectionId\":\"politics\",\"sectionName\":\"Politics\",\"webPublicationDate\":\"2019-12-05T06:00:04Z\",\"webTitle\":\"Electoral reform 'dangerously absent' from debate, say campaigners\",\"webUrl\":\"https://www.theguardian.com/politics/2019/dec/05/electoral-reform-dangerously-absent-from-debate-say-campaigners\",\"apiUrl\":\"https://content.guardianapis.com/politics/2019/dec/05/electoral-reform-dangerously-absent-from-debate-say-campaigners\",\"isHosted\":false,\"pillarId\":\"pillar/news\",\"pillarName\":\"News\"},{\"id\":\"politics/2019/nov/18/excluding-snp-lib-dems-itv-debate-unfair-court-hears\",\"type\":\"article\",\"sectionId\":\"politics\",\"sectionName\":\"Politics\",\"webPublicationDate\":\"2019-11-18T11:13:49Z\",\"webTitle\":\"Excluding SNP and Lib Dems from ITV debate is unfair, court hears\",\"webUrl\":\"https://www.theguardian.com/politics/2019/nov/18/excluding-snp-lib-dems-itv-debate-unfair-court-hears\",\"apiUrl\":\"https://content.guardianapis.com/politics/2019/nov/18/excluding-snp-lib-dems-itv-debate-unfair-court-hears\",\"isHosted\":false,\"pillarId\":\"pillar/news\",\"pillarName\":\"News\"},{\"id\":\"commentisfree/2019/dec/29/neoliberal-is-unthinking-leftist-insult-all-it-does-it-stifle-debate\",\"type\":\"article\",\"sectionId\":\"commentisfree\",\"sectionName\":\"Opinion\",\"webPublicationDate\":\"2019-12-29T08:00:32Z\",\"webTitle\":\"\u2018Neoliberal\u2019 is an unthinking leftist insult. All it does is stifle debate | Will Hutton\",\"webUrl\":\"https://www.theguardian.com/commentisfree/2019/dec/29/neoliberal-is-unthinking-leftist-insult-all-it-does-it-stifle-debate\",\"apiUrl\":\"https://content.guardianapis.com/commentisfree/2019/dec/29/neoliberal-is-unthinking-leftist-insult-all-it-does-it-stifle-debate\",\"isHosted\":false,\"pillarId\":\"pillar/opinion\",\"pillarName\":\"Opinion\"},{\"id\":\"politics/2020/jun/02/flora-needs-me-mp-caring-for-wife-hits-out-at-jacob-rees-moggs-plan\",\"type\":\"article\",\"sectionId\":\"politics\",\"sectionName\":\"Politics\",\"webPublicationDate\":\"2020-06-02T06:58:18Z\",\"webTitle\":\"'Flora needs me': MP caring for wife hits out at Jacob Rees-Mogg's plan\",\"webUrl\":\"https://www.theguardian.com/politics/2020/jun/02/flora-needs-me-mp-caring-for-wife-hits-out-at-jacob-rees-moggs-plan\",\"apiUrl\":\"https://content.guardianapis.com/politics/2020/jun/02/flora-needs-me-mp-caring-for-wife-hits-out-at-jacob-rees-moggs-plan\",\"isHosted\":false,\"pillarId\":\"pillar/news\",\"pillarName\":\"News\"},{\"id\":\"politics/2019/nov/22/dominic-raab-and-andy-mcdonald-clash-over-party-racism\",\"type\":\"article\",\"sectionId\":\"politics\",\"sectionName\":\"Politics\",\"webPublicationDate\":\"2019-11-22T23:28:48Z\",\"webTitle\":\"Raab and McDonald in racism row backstage after leaders\u2019 debate\",\"webUrl\":\"https://www.theguardian.com/politics/2019/nov/22/dominic-raab-and-andy-mcdonald-clash-over-party-racism\",\"apiUrl\":\"https://content.guardianapis.com/politics/2019/nov/22/dominic-raab-and-andy-mcdonald-clash-over-party-racism\",\"isHosted\":false,\"pillarId\":\"pillar/news\",\"pillarName\":\"News\"}]}}";

    public static ArrayList<News> fetchNewsApi(String requestNews)
    {
        ArrayList<News> news = new ArrayList<>();

        URL url = convertUrl(requestNews);
        String jsonResponse = null;
        try{
            jsonResponse = MakeHttpRequest(url);
        }
        catch (IOException e) {
            Log.e(LOG_TAG , "Error closing input stream" ,e);
        }
        news = extractNews(jsonResponse);

        return news;
    }

    private static String MakeHttpRequest(URL url) throws IOException {
        String jsonResponse = null;
        if(url == null)
        {
            return jsonResponse;
        }
        HttpURLConnection urlConnection = null;
        InputStream inputStream = null;
        try{
            urlConnection = (HttpURLConnection) url.openConnection();
            urlConnection.setReadTimeout(10000);
            urlConnection.setConnectTimeout(15000);
            urlConnection.setRequestMethod("GET");

            if(urlConnection.getResponseCode() == 200)
            {
                inputStream = urlConnection.getInputStream();
                jsonResponse = readInputStream(inputStream);
            }
            else
            {
                Log.e(LOG_TAG ,"Error Response code"+urlConnection.getResponseCode());
            }
        } catch (Exception e) {
            Log.e(LOG_TAG ,"Problem retrieving the json data",e);
        }

        return jsonResponse;
    }

    private static String readInputStream(InputStream inputStream) throws IOException {
        StringBuilder output = new StringBuilder();
        if(inputStream!=null)
        {
            InputStreamReader inputStreamReader = new InputStreamReader(inputStream , Charset.forName("UTF-8"));
            BufferedReader reader = new BufferedReader(inputStreamReader);
            String line = reader.readLine();
            while(line!=null)
            {
                output.append(line);
                line = reader.readLine();
            }
        }
        return output.toString();
    }

    private static URL convertUrl(String newsUrl) {
        if(newsUrl == null)
        {
            return null;
        }
        URL url = null;
        try{
            url = new URL(newsUrl);
        }
        catch (MalformedURLException e) {
            Log.v(LOG_TAG , "Problem building the url" , e);
        }
        return url;
    }

    public static ArrayList<News> extractNews(String jsonResponse) {
        if (TextUtils.isEmpty(jsonResponse)) {
            return null;
        }

        ArrayList<News> news = new ArrayList<>();
        try {
            JSONObject jsonObj = new JSONObject(jsonResponse);
            JSONObject response = jsonObj.getJSONObject("response");
            JSONArray results = response.getJSONArray("results");
            for(int i=0 ; i<results.length() ; ++i)
            {
                JSONObject newsFeed = results.getJSONObject(i);

                String sectionName = newsFeed.getString("sectionName");
                String webTitle = newsFeed.getString("webTitle");
                String webUrl = newsFeed.getString("webUrl");
                String webPublicationDate = newsFeed.getString("webPublicationDate");
                String type = newsFeed.getString("type");

                News newsObj = new News(sectionName , webTitle , webUrl , webPublicationDate , type);
                news.add(newsObj);
            }
        }
        catch (JSONException e) {
            Log.v("QueryUtils" , "something went wrong" , e);
        }

        return news;
    }

    public static void hideSoftKeyboard(Activity activity) {
        InputMethodManager imm = (InputMethodManager) activity.getSystemService(Context.INPUT_METHOD_SERVICE);

        View view = activity.getCurrentFocus();

        if(view == null)
        {
            view = new View(activity);
        }
        imm.hideSoftInputFromWindow(view.getWindowToken() , 0);
    }
}
